{% extends 'base.html' %}
{% block content %}

<h2>My Profile 👤</h2>

<p><strong>Name:</strong> {{ profile.user.username }}</p>
<p><strong>Email:</strong> {{ profile.user.email }}</p>
<p><strong>Age:</strong> {{ profile.age }}</p>
<p><strong>Gender:</strong> {{ profile.gender }}</p>
<p><strong>Preferred Gender:</strong> {{ profile.preferred_gender }}</p>
<p><strong>Preferred Age:</strong> {{ profile.preferred_age_min }} - {{ profile.preferred_age_max }}</p>

<hr>

<h2>Your Letter 💌</h2>

{% if letters %}
    {% for letter in letters %}
        <div style="border:1px solid #ccc; padding:15px; margin-bottom:20px; border-radius:10px;">
            {% if letter.letter_type == "text" %}
                {% if letter.text_content %}
                    <p>📝 {{ letter.text_content|linebreaksbr }}</p>
                {% else %}
                    <p><em>No text available.</em></p>
                {% endif %}
            {% elif letter.letter_type == "image" %}
                {% if letter.images.exists %}
                    {% for img in letter.images.all %}
                        <img src="{{ img.image.url }}" alt="Letter Image" style="max-width:200px; border-radius:8px;">
                    {% endfor %}
                {% else %}
                    <p><em>No images uploaded yet.</em></p>
                {% endif %}
            {% elif letter.letter_type == "pdf" %}
                {% if letter.pdf %}
                    <p>📄 <a href="{{ letter.pdf.url }}" target="_blank">View PDF</a></p>
                {% else %}
                    <p><em>No PDF uploaded yet.</em></p>
                {% endif %}
            {% endif %}
        </div>
    {% endfor %}
{% else %}
    <p>You have no letters uploaded yet.</p>
    <br>
    <a href="{% url 'upload_letter' %}" class="btn btn-primary">➕ Upload Letter</a>
{% endif %}

<br><br>
<a href="{% url 'edit_profile' %}" class="btn btn-secondary">✏️ Edit Profile</a>

{% endblock %}
